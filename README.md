# Домашнее задание № 11 по теме: "Управление процессами". К курсу Administrator Linux. Professional

## Задание

- Написать свою реализацию ps ax используя анализ /proc

## Выполнение

## ps ax

Обход всех поддиректорий /proc имеющие в названии только цифры (PID). Сортировка осуществлена с использованием sort (разделитель /, сортируем по 3 колонке)

Основной файл для анализа /proc/PID/stat. Используемые колонки:

- (1) PID - process id
- (2) comm - имя файла исполняемого файла или название потока
- (3) статус процесса
- (6) session id of the process
- (7) tty_nr - device minor (31 to 20 and 7 to 0 bits) major (15 to 8 bits). tty находим в /sys/dev/char/${major}:${minor}/uevent; /dev/pts/ нашёл в /proc/devices - но это не правильно
- (8) tpgid - ID of the foreground process group of the controlling terminal of the process
- (14) utime - затраченное процессорное время в user mode
- (15) stime - затраченное процессорное время в kernel mode
- (19) nice - приоритет процесса от 19 (низкий) до -20 (высокий)
- (20) num_threads - число потоков у данного процесса


Для формата BSD используются дополнительные обозначения статуса процесса:
- < - Высокий приоритет процесса nice = -20 (есть сомнения в правильности трактовки, возможно, существует определенный диапазон, на основании которого можно классифицировать приоритет иначе)
- N - Низкий приоритет процесса nice = 19
- L - имеется ли выделенная память с запретом страничного обмена. В репозитории имеется тест test_lock.c (gcc test_lock.c -o lockmemproc). Смотрим показатель VmLck в /proc/PID/status
- s - session leader при условии session ID = PID
- l - если процесс является многопоточным (num_threads > 1)
- + - foreground process. Фронт-процесс, если tpgid = PID

Колонка TIME. Время затраченное на процесс в BSD является суммой затраченного времени в user mode и в kernel mod колонки 14 и 15 соответственно. Сумму делим на 100 (по-умолчанию 100 тиков, но лучше брать непосредственно в каждой системе своё значение) и делим на 60 секунд, тем самым получаем время в минутах.

Команду выполненную для создания процесса смотрим в /proc/PID/cmdline - если отсутствует, то берём из /proc/PID/stat поле (2)

Написали минимальный аналог *ps ax*. Работает очень медленно, нерационально использованы обращения к файлам псевдо-файловой системы proc.
